<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Fractal Playground</title>
    <link rel="stylesheet" href="css/main.css">
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/keyboard-css@1.2.4/dist/css/main.min.css" /> 
  </head>
  <body 
    id="body" 
    class="is-family-code"
    x-data="{'axiom': 'F', 'ruleF': 'FF+[+F-F-F]-[-F+F+F]', ruleX:'X', rulePlus: '+', ruleMinus: '-', scale: 60, angle: 25, opacity: 50 }"
    @keydown.c="angle-=Number(1)"
    @keydown.v="angle+=Number(1)">
    <nav class="navbar" role="navigation" aria-label="main navigation">

      <div class="navbar-menu is-active" id="navMenu">
          <div class="navbar-item">
            <span class="icon">
              <i data-feather="codesandbox"></i>
            </span>
            <p>Fractals Playground</p>
          </div>
          <div class="navbar-item">
            <small>
              <b>Axiom: </b><span x-text="axiom"></span> |
              <b>F → </b><span x-text="ruleF"></span> |
              <b>X → </b><span x-text="ruleX"></span> |
              <b>+ → </b><span x-text="rulePlus"></span> |
              <b>- → </b><span x-text="ruleMinus"></span>
            </small>
          </div>
      </div>
    </nav>

        
    <div id="modal-info" class="modal is-active">
      <div class="modal-background has-background-white"></div>
    
      <div class="modal-content">
          <button id="closeInfoButton" class="button is-success is-large m-3 closemodal is-fixed">
            <span class="icon">
              <i data-feather="codesandbox"></i>
            </span>
          </button>

          <section class="hero ">
            <div class="hero-body">
              <p class="title">
                <span class="icon">
                  <i data-feather="codesandbox"></i>
                </span> Fractals Playground
              </p>
              <p class="subtitle has-text-white ">
                Interactively exploring L-systems
              </p>
            </div>
          </section>

          <section class="m-6" id="infoText">
            <div class="columns is-centered">
              <div id="infoContent" class="column is-6 has-text-justified content">

              </div>
            </div>
          </section>

          <footer class="footer has-text-centered">
            <div class="container">
              <div class="columns">
                <div class="column is-8-desktop is-offset-2-desktop">
                  <p>Created by Lukas Hutter, 2023</p>
                  <p>
                    <small>
                      using <a href="http://bulma.io">Bulma</a>, <a href="https://https://p5js.org/">P5.js</a> and <a href="https://feathericons.com/">Feather Icons</a>
                    </small>
                  </p>
                  <p>
                    <small>
                      Source code licensed <a href="http://opensource.org/licenses/mit-license.php">MIT</a>
                    </small>
                  </p>
                </div>
              </div>
            </div>
          </footer>
      
      </div>
    </div>


    <div id="modal-settings" class="modal">
      <div class="modal-background"></div>
    
      <div class="modal-content">
        <div class="box">
          <p class="title is-4">Settings</p>

          <div class="columns is-centered  pb-4">
            <div class="column is-vcentered p-1 is-10">
              
              <div class="field is-horizontal">
                <div class="field-label is-normal mr-1 pt-2">
                  <label class="label ">Axiom: </label>
                </div>
                <div class="field-body is-small">
                  <div class="field">
                    <div class="control">
                      <input id="axiomInput" class="input p-0 pl-2" type="text" x-model="axiom" placeholder="describe the starting shape here">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="columns is-centered">
            <div class="column is-5 is-vcentered p-1 is-10">
              <div class="field is-horizontal">
                <div class="field-label is-normal mr-1">
                  <label class="label ">F :</label>
                </div>
                <div class="field-body is-vcentered pt-2">
                  <label class="checkbox mr-6">
                    <input id="fMove" type="checkbox" checked>
                      moves forward
                  </label>

                  <label class="checkbox">
                    <input id="fDraw" type="checkbox" checked>
                      draws
                  </label>
                </div>
              </div>
            </div>
          </div>

          <div class="columns is-centered pb-4">
            <div class="column is-10 is-vcentered p-1">
              <div class="field is-horizontal">
                <div class="field-label is-normal mr-1 pt-2">
                  <label class="label ">F → </label>
                </div>
                <div class="field-body">
                  <div class="field mr-0">
                    <div class="control">
                      <input id="ruleFInput" class="input p-0 pl-2" type="text" x-model="ruleF" placeholder="What does F change to?">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="columns is-centered">
            <div class="column is-5 is-vcentered p-1 is-10">
              <div class="field is-horizontal">
                <div class="field-label is-normal mr-1">
                  <label class="label ">X : </label>
                </div>
                <div class="field-body is-vcentered pt-2">
                  <label class="checkbox mr-6">
                    <input id="xMove" type="checkbox" checked>
                      moves forward
                  </label>

                  <label class="checkbox">
                    <input id="xDraw" type="checkbox" checked>
                      draws
                  </label>
                </div>
              </div>
            </div>
          </div>

          <div class="columns is-centered  pb-4">
            <div class="column is-5 is-vcentered p-1 is-10">
              <div class="field is-horizontal">
                <div class="field-label is-normal mr-1 pt-2">
                  <label class="label ">X → </label>
                </div>
                <div class="field-body">
                  <div class="field mr-0">
                    <div class="control">
                      <input id="ruleXInput" class="input p-0 pl-2" type="text" x-model="ruleX" placeholder="What does X change to?">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="columns is-centered">
            <div class="column is-5 is-vcentered p-1 is-10">
              <div class="field is-horizontal">
                <div class="field-label is-normal mr-1 pt-2">
                  <label class="label ">+ → </label>
                </div>
                <div class="field-body">
                  <div class="field mr-0">
                    <div class="control">
                      <input id="rulePlusInput" class="input p-0 pl-2" type="text" x-model="rulePlus" placeholder="What does + change to?">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="columns is-centered">
            <div class="column is-5 is-vcentered p-1 is-10">
              <div class="field is-horizontal">
                <div class="field-label is-normal mr-1 pt-2">
                  <label class="label ">- → </label>
                </div>
                <div class="field-body">
                  <div class="field mr-0">
                    <div class="control">
                      <input id="ruleMinusInput" class="input p-0 pl-2" type="text" x-model="ruleMinus" placeholder="What does - change to?">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="columns is-mobile is-centered  pb-4">
            <div class="column is-5 is-vcentered p-1 hidden">
              <div class="field is-horizontal">
                <div class="field-label is-normal mr-1 pt-2">
                  <label class="label ">Angle (°): </label>
                </div>
                <div class="field-body is-small">
                  <div class="field">
                    <div class="control">
                      <input id="angleInput" class="input p-0 pl-2" type="number" x-model="angle" placeholder="What is the angle for turning left (-) or right (+)?">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="columns is-centered">
            <div class="column is-10 is-vcentered pl-6">
              <div class="control has-text-left">
                <label class="radio">
                  <input type="radio" name="foobar" id="selectLine" checked>
                  Draw using a regular line
                </label>
                <label class="radio">
                  <input type="radio" name="foobar" id="selectImage">
                  Draw using a photo
                </label>
              </div>
            </div>
          </div>

          <div class="columns is-mobile is-centered">
            <div class="file">
              <label class="file-label" id="input-holder">
                <input class="file-input" type="file" name="resume">
                <button class="button is-purple is-large m-3 no-border has-text-white">
                  <span class="icon">
                    <i data-feather="upload-cloud"></i>
                  </span>
                </button>
              </label>
            </div>
            <button id="submitButton" class="button is-danger is-large m-3 closemodal no-border">
              <span class="icon">
                <i data-feather="check"></i>
              </span>
            </button>
          </div>

          <div class="columns is centered">
            <div class="column content is-10">
              <h4> Keyboard Shortcuts</h4>
              <ul>
                <li><kbd class="kbc-button-xs">w</kbd>, <kbd class="kbc-button-xs">a</kbd>, <kbd class="kbc-button-xs">s</kbd>, <kbd class="kbc-button-xs">d</kbd> - for moving the origin up, left, down or right, respectively</li>
                <li><kbd class="kbc-button-xs">y</kbd> / <kbd class="kbc-button-xs">x</kbd> - for changing the depth (iteration step)</li>
                <li><kbd class="kbc-button-xs">c</kbd> / <kbd class="kbc-button-xs">v</kbd> - for changing the angle</li>
                <li><kbd class="kbc-button-xs">b</kbd> / <kbd class="kbc-button-xs">n</kbd> - for changing the zoom/scaling</li>
                </ul>
            </div>
          </div>

        </div>



      </div>
    </div>

    <section id="main">
        <div class="m-5">
          <div class="columns is-centered is-mobile">
            <div id="sketch-holder">
            </div>
          </div>
          

          <div class="columns is-centered is-mobile is-vcentered">

            <div class="has-text-centered mr-5 is-mobile">
              <div>
                <button id="moveUp" class="button is-responsive is-info">
                  <span class="icon">
                    <i data-feather="chevron-up"></i>
                  </span>
                </button>
              </div>
              <div class="">
                <button id="moveLeft" class="button is-responsive is-info mr-5">
                  <span class="icon">
                    <i data-feather="chevron-left"></i>
                  </span>
                </button>
                <button id="moveRight" class="button is-responsive is-info">
                  <span class="icon">
                    <i data-feather="chevron-right"></i>
                  </span>
                </button>
              </div>
              <div>
                <button id="moveDown" class="button is-responsive is-info">
                  <span class="icon">
                    <i data-feather="chevron-down"></i>
                  </span>
                </button>
              </div>
            </div>



            <div class="m-2">
              <button id="growBtn" class="button is-responsive is-danger m-3">
                <span class="icon">
                  <i data-feather="plus"></i>
                </span>
              </button>
              <div class="level-item has-text-centered">
                <div>
                  <p class="heading">Depth</p>
                  <p class="title is-size-4" id="depthContainer"></p>
                </div>
              </div>
              <button id="shrinkBtn" class="button is-responsive is-danger m-3">
                <span class="icon">
                  <i data-feather="minus"></i>
                </span>
              </button>
            </div>


            <div class="m-2">
              <button id="growAngle" class="button is-responsive is-warning m-3" @click="angle+=Number(1)">
                <span class="icon">
                  <i data-feather="plus"></i>
                </span>
              </button>
              <div class="level-item has-text-centered">
                <div>
                  <p class="heading">Angle</p>
                  <p class="title is-size-4"> <span id="angleInfo" x-text="angle"></span>°</p>
                </div>
              </div>
              <button id="shrinkAngle" class="button is-responsive is-warning m-3" @click="angle-=Number(1)">
                <span class="icon">
                  <i data-feather="minus"></i>
                </span>
              </button>
            </div>
     

            <div class="m-2">
              <button id="zoomIn" class="button is-responsive is-success m-3">
                <span class="icon">
                  <i data-feather="plus"></i>
                </span>
              </button>
              <div class="level-item has-text-centered">
                <div>
                  <p class="heading">Scale</p>
                  <p class="title is-size-4"><span id="zoomContainer">0.75</span></p>
                </div>
              </div>
              <button id="zoomOut" class="button is-responsive is-success m-3">
                <span class="icon">
                  <i data-feather="minus"></i>
                </span>
              </button>
            </div>

          </div>

          <div class="columns is-centered is-mobile">
            <button id="infoBtn" class="button is-white m-3 js-modal-trigger" data-target="modal-info">
              <span class="icon">
                <i data-feather="info"></i>
              </span>
            </button>
  
            <button id="settingsBtn" class="button is-white m-3 js-modal-trigger" data-target="modal-settings">
              <span class="icon">
                <i data-feather="sliders"></i>
              </span>
            </button>
            <a id="downloadButton" class="button is-white m-3" download="image.png">
              <span class="icon">
                <i data-feather="download-cloud"></i>
              </span>
            </a>
          </div>
      </div>
    </section>


    <script type="text/javascript" src="lib/main.js"></script>

    <script>
      feather.replace()
    </script>

    <script>
      fetch("https://el-uhu.github.io/fractals-app/README.md")      // The path to the raw Markdown file
        .then(response => response.blob())  // Unwrap to a blob...
        .then(blob => blob.text())          // ...then to raw text...
        .then(markdown => {                 // ...then pass the raw text into marked.parse
          document.getElementById("infoContent").innerHTML = marked.parse(markdown);
          document.getElementById("fractals-playground").remove();
        });
    </script>

  </body>
</html>
